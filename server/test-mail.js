require('dotenv').config();
const mailService = require('./service/mail-service');

async function testMail() {
    console.log('üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Mailgun...\n');
    
    const testEmail = 'your-test-email@example.com'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à email
    
    console.log('üìß –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏...');
    try {
        const activationResult = await mailService.sendActivationMail(
            testEmail,
            'http://localhost:3001/api/activate/test-link-12345'
        );
        console.log('‚úÖ –ü–∏—Å—å–º–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!');
        console.log('   Message ID:', activationResult.id);
    } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å—å–º–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:', error.message);
    }
    
    console.log('\nüìß –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–∏—Å—å–º–∞...');
    try {
        const welcomeResult = await mailService.sendWelcomeMail(
            testEmail,
            '–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'
        );
        console.log('‚úÖ –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!');
        console.log('   Message ID:', welcomeResult.id);
    } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–∏—Å—å–º–∞:', error.message);
    }
    
    console.log('\nüìß –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è...');
    try {
        const resetResult = await mailService.sendPasswordResetMail(
            testEmail,
            'http://localhost:5173/reset-password/test-token-67890'
        );
        console.log('‚úÖ –ü–∏—Å—å–º–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!');
        console.log('   Message ID:', resetResult.id);
    } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å—å–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:', error.message);
    }
    
    console.log('\n‚ú® –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!');
    console.log('üì¨ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç–æ–≤—ã–π —è—â–∏–∫:', testEmail);
    console.log('üìä Mailgun Dashboard: https://app.mailgun.com/');
}

testMail().catch(console.error);

